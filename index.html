<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>備品注文・管理システム Ver.10</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>備品注文システム</h1>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('admin')">管理画面</button>
            <button class="tab-btn" onclick="switchTab('order')">注文入力</button>
            <button class="tab-btn" onclick="switchTab('confirm')">注文確認</button>
        </div>

        <div id="panel-admin" class="panel active">
            
            <div class="section-title">1. 注文依頼者リストの登録</div>
            <p style="font-size: 0.9rem; color: #666;">
                まずはここで、依頼をお願いする人の名前を全て登録してください。
            </p>
            <div class="form-group-admin">
                <input type="text" id="new-staff-name" placeholder="依頼者名（例：友利）">
                <button class="btn btn-add" onclick="addStaff()">リストに追加</button>
            </div>

            <div class="section-title">2. 備品の追加・編集</div>
            <p style="font-size: 0.9rem; color: #666;">
                備品名を入力し、その備品の「担当依頼者」を選択して追加してください。
            </p>
            
            <div class="item-add-area">
                <input type="text" id="new-item-name" placeholder="備品名（例：トイレットペーパー）">
                <input type="text" id="new-item-desc" placeholder="説明・補足（例：ダブルのみ）">
                
                <p style="font-size:0.8rem; margin: 5px 0 2px;">▼この備品の依頼者を選択:</p>
                <select id="admin-staff-select">
                    </select>

                <button class="btn btn-add" onclick="addOrUpdateItem()">備品を追加 / 更新</button>
            </div>

            <div class="section-title" style="border-color: #dc3545; color: #dc3545;">データのリセット</div>
            <button class="btn btn-danger" onclick="resetData()">全てのデータを削除して初期化</button>

            <div class="note-text">
                ※設定完了後は「注文確認」タブからURLをコピーして保存・共有してください。
            </div>
        </div>

        <div id="panel-order" class="panel">
            
            <div id="setup-warning" class="warning-box" style="display:none;"></div>

            <div class="section-title">注文数の入力</div>
            <p style="font-size:0.8rem; color:#666; margin-bottom:10px;">
                必要な備品の個数を入力してください。<br>
                ※依頼者は管理画面の設定に基づいて自動表示されます。
            </p>
            
            <div id="items-container"></div>

            <div class="section-title">全体への連絡事項・備考</div>
            <textarea id="order-remark" placeholder="例：14時以降に配達お願いします。急ぎです、等" oninput="updateRemark()"></textarea>
            
            <button class="btn" onclick="switchTab('confirm')">確認画面へ</button>
        </div>

        <div id="panel-confirm" class="panel">
            <h3>注文概要</h3>
            
            <div id="display-remark-area" style="display:none; margin-bottom: 15px; padding: 10px; background: #fff3cd; border-radius: 4px;">
                <strong>備考:</strong> <br>
                <span id="display-remark-text" style="white-space: pre-wrap;"></span>
            </div>

            <ul id="confirm-list" class="order-list">
                </ul>

            <div class="share-area">
                <p>この内容を保存・共有するためのURLを発行します。</p>
                <button id="copy-btn" class="btn btn-secondary" onclick="copyToClipboard()">現在の状態をURLとしてコピー</button>
            </div>

            <div class="slack-area">
                <div class="section-title" style="border-left-color: #4A154B;">Slack通知設定</div>
                <p style="font-size:0.9rem; color:#555;">
                    通知を送りたい相手（メンション）を入力してください。<br>
                    <small>※最大7名まで設定可能。変更した内容はURLに保存されます。</small>
                </p>

                <div class="slack-inputs-grid">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                    <input type="text" class="slack-member-input" onchange="updateSlackMembers()">
                </div>

                <button id="slack-btn" class="btn btn-slack" onclick="copyAndOpenSlack()">
                    Slack用メッセージをコピーして起動
                </button>
                <p style="font-size:0.8rem; color:#888; margin-top:5px;">
                    ※ボタンを押すとメッセージがコピーされ、Slackが開きます。<br>
                    送りたいチャンネルやDMに「貼り付け」て送信してください。
                </p>
            </div>
            </div>

    </div>

    <script src="script.js"></script>

</body>
</html>